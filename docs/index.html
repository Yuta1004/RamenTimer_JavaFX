<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>index</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>

<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>

<style type="text/css">
pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;

}

	.line-numbers-rows > span {
		pointer-events: none;
		display: block;
		counter-increment: linenumber;
	}

		.line-numbers-rows > span:before {
			content: counter(linenumber);
			color: #999;
			display: block;
			padding-right: 0.8em;
			text-align: right;
		}
</style>

<style type="text/css">
div.prism-show-language {
	position: relative;
}

div.prism-show-language > div.prism-show-language-label {
	color: black;
	background-color: #CFCFCF;
	display: inline-block;
	position: absolute;
	bottom: auto;
	left: auto;
	top: 0;
	right: 0;
	width: auto;
	height: auto;
	font-size: 0.9em;
	border-radius: 0 0 0 5px;
	padding: 0 0.5em;
	text-shadow: none;
	z-index: 1;
	-webkit-box-shadow: none;
	-moz-box-shadow: none;
	box-shadow: none;
	-webkit-transform: none;
	-moz-transform: none;
	-ms-transform: none;
	-o-transform: none;
	transform: none;
}
</style>


</head>

<body>

<h1 id="toc_0">RamenTimer (with JavaFX)</h1>

<h2 id="toc_1">目次</h2>

<ol>
<li>環境</li>
<li>完成品</li>
<li>開発

<ol>
<li>UI作成

<ol>
<li>FXMLファイルの作成</li>
<li>UIデザイン① 〜タイトルテキスト〜</li>
<li>UIデザイン② 〜時刻表示テキスト〜</li>
<li>UIデザイン③ 〜時刻設定ボタン〜</li>
<li>UIデザイン④ 〜スタート/ストップボタン〜</li>
<li>UIデザイン⑤ 〜見た目の調整〜</li>
</ol></li>
<li>起動準備

<ol>
<li>Main.java作成</li>
<li>Makefile作成</li>
<li>UI起動確認</li>
</ol></li>
<li>プログラミングの準備

<ol>
<li>MainUIController.java作成</li>
<li>時刻表示テキストを変更してみる</li>
<li>ボタンクリック時の動作を実装してみる</li>
<li>コードの整理</li>
<li>ID設定</li>
<li>Timer.javaの準備</li>
</ol></li>
<li>タイマーの実装

<ol>
<li>時刻の初期化</li>
<li>10分増加ボタンの実装</li>
<li>1分増加、10秒減少、1秒ボタンの実装</li>
<li>Timelineの準備</li>
<li>スタート、ストップボタンの実装</li>
<li>無限にカウントダウンを続けてしまう問題の修正</li>
<li>タイマーの終了の際に音楽を再生する</li>
<li>カウントダウン中に無限に音楽を再生する</li>
</ol></li>
</ol></li>
</ol>

<h2 id="toc_2">1. 環境</h2>

<p>以下に示す環境での動作を確認しています。</p>

<ul>
<li>java:  openjdk 13.0.1 2019-10-15</li>
<li>javac:  13.0.1</li>
<li>javafx:  13.0.1</li>
</ul>

<h2 id="toc_3">2. 完成品</h2>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/release.png" alt="release.png"></p>

<h2 id="toc_4">3. 開発</h2>

<h2 id="toc_5">3.1. UI作成</h2>

<p>SceneBuilderを用いてUIを作成します。  </p>

<h2 id="toc_6">3.1.1. FXMLファイルの作成</h2>

<p>SceneBuilderを起動し、「基本アプリケーション」を選択します。<br>
画面左下にある「ドキュメント/階層」タブから、<strong>VBox以外のUIコンポーネントを削除</strong> します。</p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/1.png" alt="1.png">
<img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/3.png" alt="3.png">
<img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/4.png" alt="4.png"></p>

<p>ここまでの作業を <strong>src/fxml</strong> に <strong>MainUI.fxml</strong> として保存します。  </p>

<div><pre class="line-numbers"><code class="language-none">.
├── README.md
└── src
    └── fxml
        └── MainUI.fxml</code></pre></div>

<h2 id="toc_7">3.1.2. UIデザイン①</h2>

<p>タイトルテキストの追加を行います。  </p>

<p>「ライブラリ/<strong>Shapes</strong>」タブから <strong>Text</strong> を「ドキュメント/<strong>階層</strong>」タブにドラックアンドドロップします。<br>
このとき、<strong>Text は VBox に含める</strong> ようにしてください。(画像参照)  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/5.png" alt="5.png">
<img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/6.png" alt="6.png"></p>

<p>追加した Text をクリックし、画面右にある「インスペクタ/<strong>Properties</strong>」タブを選択します。<br>
そして、<strong>Text入力欄</strong> にタイトルテキストを入力します。<br>
また、<strong>Font選択欄</strong> や <strong>Text Alignment選択</strong> を操作して文字の表示方法を調整します。</p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/7.png" alt="7.png"></p>

<p>「ドキュメント/階層」タブ内の VBox を選択し、「インスペクタ/Properties」タブを選択します。<br>
<strong>Alignment選択欄</strong> から <strong>TOP CENTER</strong> を選択します。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/8.png" alt="8.png"></p>

<h2 id="toc_8">3.1.3. UIデザイン②</h2>

<p>時刻表示欄を追加します。</p>

<p>3.1.2.と同様にして、VBox 内に Text を追加します。<br>
このとき、<strong>Text は既に存在する Text より下に追加する</strong> ようにしてください。</p>

<p>3.1.2.と同様にして、表示する文字列の変更を行います。<br>
ここでは、とりあえずの値として <strong>00:00</strong> を設定します。<br>
また、文字サイズの変更などもこのタイミングで行います。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/9.png" alt="9.png"></p>

<h2 id="toc_9">3.1.4. UIデザイン③</h2>

<p>時刻をセットするためのボタンを追加します。  </p>

<p>「ライブラリ/<strong>Containers</strong>」タブから <strong>HBox</strong> を「ドキュメント/階層」タブにドラックアンドドロップします。<br>
このとき、<strong>HBox は既に存在する Text より下に追加する</strong> ようにしてください。(画像参照)  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/10.png" alt="10.png"></p>

<p>追加した HBox を選択し、「インスペクタ/Properties」タブから Alignment を CENTER に変更します。</p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/11.png" alt="11.png"></p>

<p>「ライブラリ/<strong>Controls</strong>」タブから <strong>Button</strong> を <strong>4つ</strong> 「ドキュメント/階層」タブにドラックアンドドロップします。<br>
このとき、<strong>Button を HBox に含める</strong> ようにしてください。(画像参照)  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/12.png" alt="12.png"></p>

<p>それぞれのボタンを選択し、「インスペクタ/Properties」タブからボタンの表示内容を画像の用に変更します。<br>
文字サイズの変更などもこのタイミングで行います。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/13.png" alt="13.png"></p>

<h3>画像では「-1秒」となっていますが、「+1秒」の誤りです</h3>

<h2 id="toc_10">3.1.5. UIデザイン④</h2>

<p>スタート、ストップボタンを追加します。  </p>

<p>3.1.4. と同様の操作を行うことで、図のようにボタンを配置します。 </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/14.png" alt="14.png"></p>

<h2 id="toc_11">3.1.6. UIデザイン⑤</h2>

<p>これまでに追加したUIコンポーネントの表示内容を調節します。  </p>

<p>各UIコンポーネントには以下の属性を設定することが出来ます。<br>
これらの数値を調整することで見た目を調整します。<br>
(数値の調整は画面右にある「インスペクタ/<strong>Layout</strong>」タブより行います)</p>

<ul>
<li>Merging/Padding: 上下左右に空き領域を設定する</li>
<li>Spacing: UIコンポーネント同士の間隔を調整する(HBox/VBoxでのみ設定可能)</li>
<li>Pref Width: UIコンポーネントの横幅を調整する(HBox/VBoxでのみ設定可能)</li>
<li>Pref Height: UIコンポーネントの縦幅を調整する(HBox/VBoxでのみ設定可能)</li>
</ul>

<p>調整を行うことで、次のように見た目を整えることが出来ます。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/15.png" alt="15.png"></p>

<h2 id="toc_12">3.2. 起動準備</h2>

<h2 id="toc_13">3.2.1. Main.java作成</h2>

<p>次のように <strong>Main.java</strong> ファイルを作成します。  </p>

<div><pre class="line-numbers"><code class="language-none">.
├── README.md
└── src
    ├── Main.java
    └── fxml
        └── MainUI.fxml</code></pre></div>

<p><strong>VSCodeなどのテキストエディタ</strong>を用いて Main.java を開き、次のように記述します。</p>

<div><pre class="line-numbers"><code class="language-java">public class Main {

    public static void main(String[] args){
        System.out.println(&quot;Hello RamenTimer!&quot;);
    }

}</code></pre></div>

<p>「<strong>コマンドプロンプト</strong>」や「<strong>コンソール</strong>」を起動し、<code>cd</code> コマンドを利用して Main.java があるパスまで移動します。  </p>

<div><pre class="line-numbers"><code class="language-none">$ cd Main.javaがあるパス
$ dir src または ls src
Main.java fxml</code></pre></div>

<p><code>dir</code> または <code>ls</code> コマンドを用いて src ディレクトリ内に存在するファイルを確認し、Main.java が表示されることを確認します。  </p>

<p>Main.java のコンパイルと実行を行います。  </p>

<div><pre class="line-numbers"><code class="language-none">$ javac -sourcepath src -d bin src/Main.java
$ java -classpath bin Main
Hello RamenTimer!</code></pre></div>

<p>メッセージが正常に出力されることを確認してください。  </p>

<h2 id="toc_14">3.2.2. Makefile作成</h2>

<p>コンパイルや実行を楽に行うためにMakefileを作成します。<br>
<strong>Makefile</strong> を利用することで、入力するコマンドの量を減らすことが出来ます。  </p>

<p>最も基本的な Makefile は「<strong>ターゲット</strong>」と「<strong>コマンド</strong>」の集合から成ります。<br>
フォーマットは以下のとおりです。  </p>

<div><pre class="line-numbers"><code class="language-none">ターゲットA:
    コマンドA
    コマンドB
    コマンドC

ターゲットB:
    コマンドD
    コマンドE</code></pre></div>

<p>Makefile は <code>make</code> コマンドとともに使用します。<br>
上に示したファイルを例にすると <code>make ターゲットA</code> と入力することで、ターゲットAに登録されているコマンド群が自動で順に実行されます。<br>
この場合は、「コマンドA」「コマンドB」「コマンドC」の順に実行が行われます。  </p>

<p>Makefile 内では <strong>定数</strong> を利用することが出来ます。<br>
使用するライブラリのパスなど、文字列の長さが長く、変更の可能性がないものなどを登録することで、全体の記述量を減らすことが出来ます。</p>

<div><pre class="line-numbers"><code class="language-none">定数名 := 文字列</code></pre></div>

<p>定数は次のように記述することで、その内容を参照することが出来ます。  </p>

<div><pre class="line-numbers"><code class="language-none">$(定数名)</code></pre></div>

<p>以上のことを踏まえ、今回のラーメンタイマー開発で使用するMakefileを次に示します。<br>
Makefile は src を同じ階層に保存してください。  </p>

<div><pre class="line-numbers"><code class="language-none">├── Makefile
├── README.md
├── bin
│   └── Main.class
└── src
    ├── Main.java
    └── fxml
        └── MainUI.fxml</code></pre></div>

<div><pre class="line-numbers"><code class="language-Makefile"># Makefile

JAVAFX_PATH := JavaFXライブラリが配置されているパス
JAVAFX_MODULES := javafx.controls,javafx.base,javafx.fxml,javafx.graphics,javafx.media,javafx.swing,javafx.web

OPTS := -p $(JAVAFX_PATH)/lib --add-modules $(JAVAFX_MODULES)
JAVA_OPTS := $(OPTS) -classpath bin
JAVAC_OPTS := $(OPTS) -sourcepath src -d bin


run:
    cp -r src/fxml bin
    java $(JAVA_OPTS) Main


compile:
    javac $(JAVAC_OPTS) src/Main.java
</code></pre></div>

<p>この Makefile を用いることで、コンパイルや実行は次のコマンドで代用することが出来ます。</p>

<div><pre class="line-numbers"><code class="language-none"># コンパイル
$ make compile

# 実行
$ make run</code></pre></div>

<h2 id="toc_15">3.2.3. UI起動確認</h2>

<p>3.1.で作成したUIが正常に起動することを確認します。  </p>

<p>Main.javaを次のように編集してください。<br>
<strong>※3.2.1.で記述した内容はすべて削除してください</strong></p>

<div><pre class="line-numbers"><code class="language-java">import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.stage.Stage;

import java.io.IOException;

public class Main extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {
        try {
            // シーン作成
            FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/fxml/MainUI.fxml&quot;));
            Scene scene = new Scene(loader.load());

            // ステージ初期化
            stage.setTitle(&quot;ラーメンタイマー&quot;);
            stage.setScene(scene);

            // UI表示
            stage.show();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

}</code></pre></div>

<p>「<strong>シーン作成</strong>」では、3.1.で作成した MainUI.fxml の読み込みを行い、<strong>Scene</strong> の初期化を行っています。<br>
「<strong>ステージ初期化</strong>」では初期化済みの Scene を <strong>Stage</strong> に登録する処理を行います。<br>
このタイミングでウィンドウタイトルの設定を行います。  </p>

<p>実行時に実際に表示される画面は Stage 、UIコンポーネントの統括的な管理を行うものが Scene です。<br>
JavaFXアプリケーションにおける Stage と Scene の関係は以下に示す図を参照してください。 </p>

<p><a href="https://lh3.googleusercontent.com/proxy/7J3Tx0l9387UbgHYI-y-CCnQDaVFJiLd4CpBBpMzX0D_BT9X5HwUt1nfSwBH_5HaW6tr1WtK6v6H7PclZSBc35ndetvm7QNl20wBIdFnChPq8qfKmTJLSxlaJyA">Figure</a></p>

<p>編集後は次のコマンドを実行して、正常にUIが表示されることを確認してください。</p>

<div><pre class="line-numbers"><code class="language-none">$ make compile
$ make run</code></pre></div>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/16.png" alt="16.png"></p>

<h2 id="toc_16">3.3. プログラミングの準備</h2>

<h2 id="toc_17">3.3.1. MainUIController.java作成</h2>

<p>3.2.3.までの内容でUIの起動を表示確認を行うことが出来ました。<br>
ボタンクリック時の挙動など、UIコンポーネントに意味をもたせるためには Controller を使用します。  </p>

<p>以下に示す場所に <strong>MainUIController.java</strong> を作成し、テキストエディタで内容を記述してください。</p>

<div><pre class="line-numbers"><code class="language-none">.
├── Makefile
├── README.md
├── bin
│   ├── Main.class
│   └── fxml
│       └── MainUI.fxml
└── src
    ├── Main.java
    ├── MainUIController.java
    └── fxml
        └── MainUI.fxml</code></pre></div>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.Initializable;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @Override
    public void initialize(URL location, ResourceBundle resource) {}

}</code></pre></div>

<p>次に MainUI.java を開き</p>

<div><pre class="line-numbers"><code class="language-java">FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/fxml/MainUI.fxml&quot;));</code></pre></div>

<p>の次の行に</p>

<div><pre class="line-numbers"><code class="language-java">loader.setController(new MainUIController());</code></pre></div>

<p>を追加してください。  </p>

<p>追加後の Main.java は以下のようになります。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.stage.Stage;

import java.io.IOException;

public class Main extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {
        try {
            // シーン作成
            FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/fxml/MainUI.fxml&quot;));
            loader.setController(new MainUIController());
            Scene scene = new Scene(loader.load());

            // ステージ初期化
            stage.setTitle(&quot;ラーメンタイマー&quot;);
            stage.setScene(scene);

            // UI表示
            stage.show();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

}</code></pre></div>

<p>ここで作成した MainUIController には動作を記述してないため新しい動きをするなどはありませんが、プログラムのチェックのためにコンパイルと実行を行ってください。  </p>

<div><pre class="line-numbers"><code class="language-none">$ make compile
$ make run</code></pre></div>

<p>3.2.3.と同じように UI が表示された場合、正常に動作しています。  </p>

<h2 id="toc_18">3.3.2. 時刻表示テキストを変更してみる</h2>

<p>3.3.1.で作成した MainUIController の動作を確認してみます。  </p>

<p>Controller から UI の表示を制御する場合、制御したいUIコンポーネントに ID を設定する必要があります。<br>
ここでは、時刻表示テキストを Controller から変更してみます。  </p>

<h2 id="toc_19"></h2>

<p>まず、SceneBuilder で MainUI.fxml を開きます。<br>
次に、時刻表示テキストをクリックし、画面右側の「インスペクタ/<strong>Code</strong>」を選択します。<br>
そして <strong>fx:id入力欄</strong> にIDを設定します。<br>
任意のIDを設定することが出来ますが、ここでは <strong>clockText</strong> とします。</p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/17.png" alt="17.png"></p>

<p>以上の操作により、時刻表示テキストは ID &quot;clockText&quot; が設定され、 Controller から制御することが可能になりました。  </p>

<hr>

<p>MainUIController.java をテキストエディタで開き、次のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        clockText.setText(&quot;12:04&quot;);
    }

}</code></pre></div>

<p><strong>(変更: 1, 3, 10, 11, 15行目)</strong>  </p>

<p>FXMLファイルに記述されたUIコンポーネントの制御のために必要なクラスを使用できるように、1、3行目に import 文が追加されています。<br>
また、Text クラスの変数 clockText を10、11行目で宣言しています。<br>
このように<strong>変数名とIDを対応付ける</strong>ことで、FXMLファイル内のUIコンポーネントを Controller から使用することが出来ます。<br>
15行目では、clockText の <strong>setTextメソッド</strong> を用いて時刻表示テキストに表示する文字列が &quot;12:04&quot; となるように処理を行っています。  </p>

<p><strong>initializeメソッド</strong> は Controller の初期化時に1度だけ実行されるものです。  </p>

<p>この状態でコンパイルし実行すると、時刻表示テキストが指定した文字列に変更されていることが確認できます。  </p>

<div><pre class="line-numbers"><code class="language-none">$ make compile
$ make run</code></pre></div>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/18.png" alt="18.png"></p>

<h2 id="toc_20">3.3.3. ボタンクリック時の動作を実装してみる</h2>

<p>3.3.2.では Controller 初期化時に時刻表示テキストの変更を行いました。<br>
3.3.3.ではスタートボタンをクリックした時に時刻表示できストを変更するようにしてみます。  </p>

<p>まず、3.3.2.と同様にしてスタートボタンに <strong>startButton</strong> という ID を設定してください。<br>
次に、MainUIController.java を以下のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button startButton;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        startButton.setOnAction(event -&gt; {
            clockText.setText(&quot;12:04&quot;);
        });
    }

}</code></pre></div>

<p><strong>(変更: 4, 13, 14, 18, 19, 20行目)</strong></p>

<p>ボタンクリック時の動作は、<strong>setOnActionメソッド</strong> を上のように記述することで実装することが出来ます。<br>
複数の動作を設定することもでき、その場合は <code>{}</code> の内部に複数行の処理を記述します。   </p>

<p>この状態でコンパイルし実行すると、スタートボタンを押すと時刻表示テキストが指定した文字列に変更されることが確認できます。  </p>

<div><pre class="line-numbers"><code class="language-none">$ make compile
$ make run</code></pre></div>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/19.png" alt="19.png"></p>

<h2 id="toc_21">3.3.4. コードの整理</h2>

<p>ラーメンタイマーの実装を行う前に、3.3.2.と3.3.3.で追記したコードを削除します。<br>
MainUIController.java を次のようにしてください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button startButton;

    @Override
    public void initialize(URL location, ResourceBundle resource) {}

}</code></pre></div>

<h2 id="toc_22">3.3.5. ID設定</h2>

<p>3.3.2.と3.3.3.では時刻表示テキストとスタートボタンに ID を設定しました。<br>
ここでは、制御対象である全てのUIコンポーネントに ID を設定します。  </p>

<p>以下のように ID の設定を行ってください。  </p>

<ul>
<li>+10分: <strong>plus10Min</strong></li>
<li>+1分: <strong>plus1Min</strong></li>
<li>+10秒: <strong>plus10Sec</strong></li>
<li>+1秒: <strong>plus1Sec</strong></li>
<li>ストップボタン: <strong>stopButton</strong></li>
</ul>

<p>MainUIController.java を次のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    @Override
    public void initialize(URL location, ResourceBundle resource) {}

}</code></pre></div>

<p><strong>(変更: 14行目)</strong></p>

<p>変更後はコンパイルと実行を行い、正常にUIが表示されることを確認してください。<br>
もしエラーが発生する場合、IDの設定ミスの可能性があります。  </p>

<h2 id="toc_23">3.3.6. Timer.javaの準備</h2>

<p>ラーメンタイマー実装の前に、<strong>Timer.java</strong> を準備します。<br>
Timer.java は時刻管理を行うためのクラスが記述されたプログラムファイルです。<br>
本稿では JavaFX を用いた GUI をもつアプリケーションの作成に焦点を当てているためタイマーの実装は省略します。  </p>

<p>次のプログラムを Timer.java として以下に示す場所に保存してください。  </p>

<div><pre class="line-numbers"><code class="language-none">.
├── Makefile
├── README.md
├── bin
│   ├── Clock.class
│   ├── Main.class
│   ├── MainUIController.class
│   └── fxml
│       └── MainUI.fxml
└── src
    ├── Main.java
    ├── MainUIController.java
    ├── Timer.java
    └── fxml
        └── MainUI.fxml</code></pre></div>

<div><pre class="line-numbers"><code class="language-java">public class Timer {

    public int second = 0;
    public static final int M = 60, S = 1;

    public Timer(int m, int s) {
        set(m, s);
    }

    public void set(int m, int s) {
        second = m*M + s*S;
    }

    public void tick() {
        tick(1);
    }

    public void tick(int t) {
        // 加算
        second += t;

        // 繰り上げ処理
        if(second &gt;= 60*100)
            second %= 60*100;
        if(second &lt; 0)
            second = (60*100)-Math.abs(second)%(60*100);
    }

    public String toString() {
        return String.format(&quot;%02d:%02d&quot;, second/M, second%M);
    }
}</code></pre></div>

<h2 id="toc_24">3.4. タイマーの実装</h2>

<h2 id="toc_25">3.4.1. 時刻の初期化</h2>

<p>タイマー起動時に時刻表示を3分で初期化するようにします。<br>
また、内部でタイマーとして扱うTimerクラスのインスタンス化と初期化も行います。  </p>

<p>MainUIController.java を次のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);
    }

}</code></pre></div>

<p><strong>(変更: 16, 20, 21, 22, 23行目)</strong></p>

<p>16行目では3.3.6.で準備した Timer を扱うための変数を宣言しています。<br>
20~23行目では、timer と時刻表示テキストを3分で初期化しています。  </p>

<p>正常に変更できている場合、次のように表示されます。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/20.png" alt="20.png"></p>

<h2 id="toc_26">3.4.2. 10分増加ボタンの実装</h2>

<p>タイマーの時刻を調整するボタンのうちの1つである、10分増加ボタンの動作を実装します。  </p>

<p>MainUIController.java を次のように変更してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });
    }

}</code></pre></div>

<p><strong>(変更: 24, 25, 26, 27, 28行目)</strong></p>

<p>Timerクラスには <strong>tickメソッド</strong> が実装されており、引数で指定された秒数だけ内部の時刻を進めるという処理を行います。<br>
26行目では、10分増加ボタンが押された時に Timer インスタンスがもつ時刻を 600 秒 (=10分) 進めるという処理を行っています。</p>

<p>Timerクラスには <strong>toStringメソッド</strong> が実装されており、時刻データを文字列の形式へ変換するという処理を行います。<br>
27行目では、toString メソッドの実行結果を時刻表示テキストにセットすることで、時刻の更新処理を行っています。  </p>

<p>正常に実装出来ている場合、10分増加ボタンを押すことで時刻表示テキストが更新されます。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/21.png" alt="21.png"></p>

<h2 id="toc_27">3.4.3. 1分増加、10秒増加、1秒増加ボタンの実装</h2>

<p>10分増加ボタンを除いた残りのタイマーの時刻を調整するボタンを実装します。<br>
追加するコードは3.4.2.とほとんど同じで、tick メソッドに渡す秒数が変化するのみです。  </p>

<p>MainUIController.java を以下のように変更してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });

        // 1分増加ボタンが押されたときの動作
        plus1Min.setOnAction(event -&gt; {
            timer.tick(1*60);
            clockText.setText( timer.toString() );
        });

        // 10秒増加ボタンが押されたときの動作
        plus10Sec.setOnAction(event -&gt; {
            timer.tick(10);
            clockText.setText( timer.toString() );
        });

        // 1秒増加ボタンが押されたときの動作
        plus1Sec.setOnAction(event -&gt; {
            timer.tick(1);
            clockText.setText( timer.toString() );
        });
    }

}</code></pre></div>

<p><strong>(変更: 30~46行目)</strong></p>

<p>正常に実装出来ている場合、それぞれのボタンが動作します。  </p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/22.png" alt="22.png"></p>

<h2 id="toc_28">3.4.4. Timelineの準備</h2>

<p>タイマーがカウントダウンを行うためには、1秒毎に時刻の更新処理を行う必要があります。<br>
JavaFX にはこのような定期的に処理を行うためのものが実装されており、<strong>Timeline</strong> という名前でユーザはこれを利用することが出来ます。<br>
ここでは、Timeline の初期化までを行います。  </p>

<p>MainUIController.java を以下のように変更してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;
import javafx.animation.Timeline;
import javafx.animation.KeyFrame;
import javafx.util.Duration;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;
    private Timeline tl;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // Timelineの初期化
        Duration d = new Duration(1000);
        KeyFrame kf = new KeyFrame(d, event -&gt; {
            timer.tick(-1);
            clockText.setText( timer.toString() );
        });
        tl = new Timeline(kf);
        tl.setCycleCount(Timeline.INDEFINITE);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });

        // 1分増加ボタンが押されたときの動作
        plus1Min.setOnAction(event -&gt; {
            timer.tick(1*60);
            clockText.setText( timer.toString() );
        });

        // 10秒増加ボタンが押されたときの動作
        plus10Sec.setOnAction(event -&gt; {
            timer.tick(10);
            clockText.setText( timer.toString() );
        });

        // 1秒増加ボタンが押されたときの動作
        plus1Sec.setOnAction(event -&gt; {
            timer.tick(1);
            clockText.setText( timer.toString() );
        });
    }

}</code></pre></div>

<p><strong>(変更: 5, 6, 7, 20, 28~35行目)</strong></p>

<p>Timeline は <strong>Duration</strong> と <strong>KeyFrame</strong> の2つを設定することで利用することが出来ます。<br>
今回の場合は、Duration には処理ごとの間隔を、KeyFrame には定期的に行う処理を設定します。<br>
29~33行目では Duration と KeyFrame の設定を行っており、1秒間隔で、定期的に timer の時刻を1秒減少させて時刻表示テキストを更新するという処理を設定しています。<br>
34~35行目では、設定済みの Keyframe と Duration を用いて Timeline の初期化を行い、動作モードを <strong>INDEFINITE (=無限に動き続ける)</strong> に設定しています。  </p>

<h2 id="toc_29">3.4.5. スタート、ストップボタンの実装</h2>

<p>スタート、ストップボタンの実装を行います。  </p>

<p>MainUIController.java を次のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;
import javafx.animation.Timeline;
import javafx.animation.KeyFrame;
import javafx.util.Duration;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;
    private Timeline tl;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // Timelineの初期化
        Duration d = new Duration(1000);
        KeyFrame kf = new KeyFrame(d, event -&gt; {
            timer.tick(-1);
            clockText.setText( timer.toString() );
        });
        tl = new Timeline(kf);
        tl.setCycleCount(Timeline.INDEFINITE);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });

        // 1分増加ボタンが押されたときの動作
        plus1Min.setOnAction(event -&gt; {
            timer.tick(1*60);
            clockText.setText( timer.toString() );
        });

        // 10秒増加ボタンが押されたときの動作
        plus10Sec.setOnAction(event -&gt; {
            timer.tick(10);
            clockText.setText( timer.toString() );
        });

        // 1秒増加ボタンが押されたときの動作
        plus1Sec.setOnAction(event -&gt; {
            timer.tick(1);
            clockText.setText( timer.toString() );
        });

        // スタートボタンが押されたとき
        startButton.setOnAction(event -&gt; {
            tl.play();
        });

        // ストップボタンが押されたとき
        stopButton.setOnAction(event -&gt; {
            tl.stop();
        });
    }

}</code></pre></div>

<p><strong>(変更: 61~69行目)</strong></p>

<p>Timeline には <strong>playメソッド</strong>、<strong>stopメソッド</strong> が実装されており、それぞれ Timeline による処理の再開と停止を行うことが出来ます。<br>
スタート、ストップボタンではそれぞれ play メソッドと stop メソッドを実行することで、タイマーの再生や停止を実現しています。  </p>

<p>正常に実装できている場合、スタート、ストップボタンを押すことでタイマーを進めたり止めたりすることが出来ます。</p>

<p><img src="https://yuta1004.github.io/RamenTimer_JavaFX/images/23.png" alt="23.png"></p>

<h2 id="toc_30">3.4.6. 無限にカウントダウンを続けてしまう問題の修正</h2>

<p>3.4.5.までのコードではタイマーが無限にカウントダウンを続けてしまい、ラーメンタイマーとしては未完成です。<br>
ここではこのような問題を修正します。  </p>

<p>MainUIController.java を以下のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;
import javafx.animation.Timeline;
import javafx.animation.KeyFrame;
import javafx.util.Duration;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;
    private Timeline tl;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // Timelineの初期化
        Duration d = new Duration(1000);
        KeyFrame kf = new KeyFrame(d, event -&gt; {
            if(timer.second &gt; 0) {
                timer.tick(-1);
                clockText.setText( timer.toString() );
            }
        });
        tl = new Timeline(kf);
        tl.setCycleCount(Timeline.INDEFINITE);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });

        // 1分増加ボタンが押されたときの動作
        plus1Min.setOnAction(event -&gt; {
            timer.tick(1*60);
            clockText.setText( timer.toString() );
        });

        // 10秒増加ボタンが押されたときの動作
        plus10Sec.setOnAction(event -&gt; {
            timer.tick(10);
            clockText.setText( timer.toString() );
        });

        // 1秒増加ボタンが押されたときの動作
        plus1Sec.setOnAction(event -&gt; {
            timer.tick(1);
            clockText.setText( timer.toString() );
        });

        // スタートボタンが押されたとき
        startButton.setOnAction(event -&gt; {
            tl.play();
        });

        // ストップボタンが押されたとき
        stopButton.setOnAction(event -&gt; {
            tl.stop();
        });
    }

}</code></pre></div>

<p><strong>(変更: 31, 34行目)</strong></p>

<p>ここでは、KeyFrame 内に設定していた処理を次のように変更しました。</p>

<ul>
<li>旧: タイマーの時刻を1秒減少させて、時刻表示テキストを更新する</li>
<li>新: <strong>タイマーが0秒でないとき</strong>、タイマーの時刻を1病減少させて、時刻表示テキストを更新する</li>
</ul>

<p><strong>if文</strong> を用いてタイマーが0秒でない時にのみ更新処理を行うことで、無限にカウントダウンを続けてしまう問題を修正しました。  </p>

<p>正常に実装できている場合、タイマーが0秒になるとカウントダウンが停止します。</p>

<h2 id="toc_31">3.4.7. タイマー終了の際に音楽を再生する</h2>

<p>ここでは、タイマー終了時に音楽を再生する機能を実装します。  </p>

<p>音楽の再生には <strong>AudioClip</strong> を使用します。<br>
AudioClip を用いることで、手軽に音楽を再生する事ができます。  </p>

<p>まず、再生する音楽をダウンロードします。<br>
今回は以下のリンクで公開されているものを使用します。  </p>

<p><a href="https://maoudamashii.jokersounds.com/music/se/mp3/se_maoudamashii_chime14.mp3">魔王魂 効果音 ベル14</a></p>

<p>ダウンロードしたmp3ファイルは以下のように配置してください。  </p>

<div><pre class="line-numbers"><code class="language-none">.
├── Makefile
├── README.md
├── bin
│   ├── Clock.class
│   ├── Main.class
│   ├── MainUIController.class
│   ├── Timer.class
│   └── fxml
│       └── MainUI.fxml
└── src
    ├── Main.java
    ├── MainUIController.java
    ├── Timer.java
    ├── fxml
    │   └── MainUI.fxml
    └── music
        └── finish.mp3</code></pre></div>

<p>次に、MainUIController.javaを以下のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;
import javafx.scene.media.AudioClip;
import javafx.animation.Timeline;
import javafx.animation.KeyFrame;
import javafx.util.Duration;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;
    private Timeline tl;
    private AudioClip finishMusic;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に音声ファイルを読み込み
        finishMusic = new AudioClip(getClass().getResource(&quot;/music/finish.mp3&quot;).toString());

        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // Timelineの初期化
        Duration d = new Duration(1000);
        KeyFrame kf = new KeyFrame(d, event -&gt; {
            if(timer.second &gt; 0) {
                timer.tick(-1);
                clockText.setText( timer.toString() );
            } else {
                tl.stop();
                finishMusic.play();
            }
        });
        tl = new Timeline(kf);
        tl.setCycleCount(Timeline.INDEFINITE);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });

        // 1分増加ボタンが押されたときの動作
        plus1Min.setOnAction(event -&gt; {
            timer.tick(1*60);
            clockText.setText( timer.toString() );
        });

        // 10秒増加ボタンが押されたときの動作
        plus10Sec.setOnAction(event -&gt; {
            timer.tick(10);
            clockText.setText( timer.toString() );
        });

        // 1秒増加ボタンが押されたときの動作
        plus1Sec.setOnAction(event -&gt; {
            timer.tick(1);
            clockText.setText( timer.toString() );
        });

        // スタートボタンが押されたとき
        startButton.setOnAction(event -&gt; {
            tl.play();
        });

        // ストップボタンが押されたとき
        stopButton.setOnAction(event -&gt; {
            tl.stop();
        });
    }

}</code></pre></div>

<p><strong>(変更: 5, 22, 26, 27, 39~42行目)</strong></p>

<p>また、Makefileを次のように編集してください。  </p>

<div><pre class="line-numbers"><code class="language-none"># Makefile

JAVAFX_PATH := JavaFXが配置されているパス
JAVAFX_MODULES := javafx.controls,javafx.base,javafx.fxml,javafx.graphics,javafx.media,javafx.swing,javafx.web

OPTS := -p $(JAVAFX_PATH)/lib --add-modules $(JAVAFX_MODULES)
JAVA_OPTS := $(OPTS) -classpath bin
JAVAC_OPTS := $(OPTS) -sourcepath src -d bin


run:
    cp -r src/fxml bin
    cp -r src/music bin
    java $(JAVA_OPTS) Main


compile:
    javac $(JAVAC_OPTS) src/Main.java</code></pre></div>

<p><strong>(変更: 13行目)</strong></p>

<p>AudioClip をプログラムで使用するために 5 行目で import 文を用いています。<br>
また、音楽ファイルを使用するために 22 行目で AudioClip 変数の宣言と、26~27 行目でファイルの読み込みを行っています。<br>
そして、タイマー終了時に再生を行うために 39~42 行目に if-else 文を追加しています。<br>
3.4.6.では 0 秒でない時にタイマー継続という処理を行っていましたが、そうでないとき(=タイマーが終了したとき)には Timeline の定期処理をストップさせた後に AudioClip の再生を行っています。  </p>

<p>正常に実装できている場合、タイマーの残り時間が 0 秒になると音楽が 1 度だけ再生されます。</p>

<h2 id="toc_32">3.4.8. カウントダウン中に無限に音楽を再生する</h2>

<p>タイマーの終了時だけではなく、カウントダウン中も音楽を再生するようにします。  </p>

<p>まずは、使用する音楽ファイルのダウンロードを行います。<br>
今回は以下のリンクで公開されている音楽を使用します。  </p>

<p><a href="https://maoudamashii.jokersounds.com/music/game/mp3/game_maoudamashii_5_village10.mp3">魔王魂 BGM素材 村10</a></p>

<p>ダウンロードした音楽ファイルは次のように配置してください。  </p>

<div><pre class="line-numbers"><code class="language-none">.
├── Makefile
├── README.md
├── bin
│   ├── Clock.class
│   ├── Main.class
│   ├── MainUIController.class
│   ├── Timer.class
│   ├── fxml
│   │   └── MainUI.fxml
│   └── music
│       ├── 1.mp3
│       └── finish.mp3
└── src
    ├── Main.java
    ├── MainUIController.java
    ├── Timer.java
    ├── fxml
    │   └── MainUI.fxml
    └── music
        ├── finish.mp3
        └── loop.mp3</code></pre></div>

<p>次に、MainUIController.java を次のように編集してください。    </p>

<div><pre class="line-numbers"><code class="language-java">import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.text.Text;
import javafx.scene.control.Button;
import javafx.scene.media.AudioClip;
import javafx.animation.Timeline;
import javafx.animation.KeyFrame;
import javafx.util.Duration;

import java.net.URL;
import java.util.ResourceBundle;

public class MainUIController implements Initializable {

    @FXML
    private Text clockText;
    @FXML
    private Button plus10Min, plus1Min, plus10Sec, plus1Sec, startButton, stopButton;

    private Timer timer;
    private Timeline tl;
    private AudioClip finishMusic, loopMusic;

    @Override
    public void initialize(URL location, ResourceBundle resource) {
        // 初期化時に音声ファイルを読み込み
        finishMusic = new AudioClip(getClass().getResource(&quot;/music/finish.mp3&quot;).toString());
        loopMusic = new AudioClip(getClass().getResource(&quot;/music/loop.mp3&quot;).toString());
        loopMusic.setCycleCount(AudioClip.INDEFINITE);

        // 初期化時に3分を設定
        timer = new Timer(3, 0);
        clockText.setText(&quot;03:00&quot;);

        // Timelineの初期化
        Duration d = new Duration(1000);
        KeyFrame kf = new KeyFrame(d, event -&gt; {
            if(timer.second &gt; 0) {
                timer.tick(-1);
                clockText.setText( timer.toString() );
            } else {
                tl.stop();
                loopMusic.stop();
                finishMusic.play();
            }
        });
        tl = new Timeline(kf);
        tl.setCycleCount(Timeline.INDEFINITE);

        // 10分増加ボタンが押されたときの動作
        plus10Min.setOnAction(event -&gt; {
            timer.tick(10*60);
            clockText.setText( timer.toString() );
        });

        // 1分増加ボタンが押されたときの動作
        plus1Min.setOnAction(event -&gt; {
            timer.tick(1*60);
            clockText.setText( timer.toString() );
        });

        // 10秒増加ボタンが押されたときの動作
        plus10Sec.setOnAction(event -&gt; {
            timer.tick(10);
            clockText.setText( timer.toString() );
        });

        // 1秒増加ボタンが押されたときの動作
        plus1Sec.setOnAction(event -&gt; {
            timer.tick(1);
            clockText.setText( timer.toString() );
        });

        // スタートボタンが押されたとき
        startButton.setOnAction(event -&gt; {
            tl.play();
            loopMusic.play();
        });

        // ストップボタンが押されたとき
        stopButton.setOnAction(event -&gt; {
            tl.stop();
            loopMusic.stop();
        });
    }

}</code></pre></div>

<p><strong>(変更: 22, 28, 29, 43, 77, 83行目)</strong></p>

<p>22、28~29 行目では3.4.7.と同じようにして音楽ファイルの準備を行っています。<br>
そして、「タイマーのストップ」「スタートボタンが押されたとき」「ストップボタンが押されたとき」の 3 箇所でそれぞれ音楽ファイルの制御を行っています。  </p>

<p>正常に実装できている場合、スタートボタンを押すと音楽が流れ始め、ストップボタンを押すか残り時間が 0 秒になるまで音楽が無限に流れ続けます。  </p>

<h2 id="toc_33"></h2>

<p><em>最終更新 2021/02/06</em></p>



<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],a||l),"Object"!==n.util.type(e[l])||r[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||r[n.util.objId(e[l])]||(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,r)):(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var r,l=a.elements||document.querySelectorAll(a.selector),i=0;r=l[i++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(!s||!i)return n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),a&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var l=n.tokenize(e,t);return a.stringify(n.util.encode(l),r)},tokenize:function(e,t){var a=n.Token,r=[e],l=t.rest;if(l){for(var i in l)t[i]=l[i];delete t.rest}e:for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var o=t[i];o="Array"===n.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],c=u.inside,g=!!u.lookbehind,h=!!u.greedy,f=0,d=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var m=r[p];if(r.length>e.length)break e;if(!(m instanceof a)){u.lastIndex=0;var y=u.exec(m),v=1;if(!y&&h&&p!=r.length-1){var b=r[p+1].matchedStr||r[p+1],k=m+b;if(p<r.length-2&&(k+=r[p+2].matchedStr||r[p+2]),u.lastIndex=0,y=u.exec(k),!y)continue;var w=y.index+(g?y[1].length:0);if(w>=m.length)continue;var _=y.index+y[0].length,P=m.length+b.length;if(v=3,P>=_){if(r[p+1].greedy)continue;v=2,k=k.slice(0,P)}m=k}if(y){g&&(f=y[1].length);var w=y.index+f,y=y[0].slice(f),_=w+y.length,S=m.slice(0,w),O=m.slice(_),j=[p,v];S&&j.push(S);var A=new a(i,c?n.tokenize(y,c):y,d,y,h);j.push(A),O&&j.push(O),Array.prototype.splice.apply(r,j)}}}}}return r},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.matchedStr=a||null,this.greedy=!!r};if(a.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join("");var l={type:e.type,content:a.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,l=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>

<script type="text/javascript">
Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};
</script>

<script type="text/javascript">
Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),Prism.languages.insertBefore("java","function",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0}});
</script>

<script type="text/javascript">
Prism.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|.)*/,lookbehind:!0},string:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,builtin:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,symbol:{pattern:/^[^:=\r\n]+(?=\s*:(?!=))/m,inside:{variable:/\$+(?:[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:[/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,{pattern:/(\()(?:addsuffix|abspath|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:s|list)?)(?=[ \t])/,lookbehind:!0}],operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/};
</script>

<script type="text/javascript">
!function(){"undefined"!=typeof self&&self.Prism&&self.document&&Prism.hooks.add("complete",function(e){if(e.code){var t=e.element.parentNode,s=/\s*\bline-numbers\b\s*/;if(t&&/pre/i.test(t.nodeName)&&(s.test(t.className)||s.test(e.element.className))&&!e.element.querySelector(".line-numbers-rows")){s.test(e.element.className)&&(e.element.className=e.element.className.replace(s,"")),s.test(t.className)||(t.className+=" line-numbers");var n,a=e.code.match(/\n(?!$)/g),l=a?a.length+1:1,m=new Array(l+1);m=m.join("<span></span>"),n=document.createElement("span"),n.className="line-numbers-rows",n.innerHTML=m,t.hasAttribute("data-start")&&(t.style.counterReset="linenumber "+(parseInt(t.getAttribute("data-start"),10)-1)),e.element.appendChild(n)}}})}();
</script>

<script type="text/javascript">
!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e={html:"HTML",xml:"XML",svg:"SVG",mathml:"MathML",css:"CSS",clike:"C-like",javascript:"JavaScript",abap:"ABAP",actionscript:"ActionScript",apacheconf:"Apache Configuration",apl:"APL",applescript:"AppleScript",asciidoc:"AsciiDoc",aspnet:"ASP.NET (C#)",autoit:"AutoIt",autohotkey:"AutoHotkey",basic:"BASIC",csharp:"C#",cpp:"C++",coffeescript:"CoffeeScript","css-extras":"CSS Extras",fsharp:"F#",glsl:"GLSL",http:"HTTP",inform7:"Inform 7",json:"JSON",latex:"LaTeX",lolcode:"LOLCODE",matlab:"MATLAB",mel:"MEL",nasm:"NASM",nginx:"nginx",nsis:"NSIS",objectivec:"Objective-C",ocaml:"OCaml",parigp:"PARI/GP",php:"PHP","php-extras":"PHP Extras",powershell:"PowerShell",jsx:"React JSX",rest:"reST (reStructuredText)",sas:"SAS",sass:"Sass (Sass)",scss:"Sass (Scss)",sql:"SQL",typescript:"TypeScript",vhdl:"VHDL",vim:"vim",wiki:"Wiki markup",yaml:"YAML"};Prism.hooks.add("before-highlight",function(s){var a=s.element.parentNode;if(a&&/pre/i.test(a.nodeName)){var t,i,r=a.getAttribute("data-language")||e[s.language]||s.language.substring(0,1).toUpperCase()+s.language.substring(1),l=a.previousSibling;l&&/\s*\bprism-show-language\b\s*/.test(l.className)&&l.firstChild&&/\s*\bprism-show-language-label\b\s*/.test(l.firstChild.className)?i=l.firstChild:(t=document.createElement("div"),i=document.createElement("div"),i.className="prism-show-language-label",t.className="prism-show-language",t.appendChild(i),a.parentNode.insertBefore(t,a)),i.innerHTML=r}})}}();
</script>

<script type="text/x-mathjax-config">
(function () {

MathJax.Hub.Config({
	'showProcessingMessages': false,
	'messageStyle': 'none'
});

if (typeof MathJaxListener !== 'undefined') {
	MathJax.Hub.Register.StartupHook('End', function () {
		MathJaxListener.invokeCallbackForKey_('End');
	});
}

})();
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

</html>
